

<div *ngIf="windowPanel.bodyType == 'map'; else reportBlock">
  <div #panelDiv class="panel panel-default allowPointerEvents">
    <!-- <div class="scroll-better"></div> -->
    <div #dragBar class="panel-heading panel-heading-custom">
      {{ windowPanel.title }} - {{ windowPanel.tag }}
      <button class="navbarButton"s (click)="removeWindow()">
        <span class="glyphicon glyphicon-remove"></span>
      </button>
      <!-- <button class="navbarButton" (click)="incAlpha()">
        <span class="glyphicon glyphicon-plus"></span>
      </button>
      <button class="navbarButton" (click)="decAlpha()">
        <span class="glyphicon glyphicon-minus"></span>
      </button>
      <button class="navbarButton" (click)="maximize()">
        <span #glyphSize class="glyphicon" [ngClass]="{'glyphicon-resize-full': !maximized, 'glyphicon-resize-small': maximized }"></span>
      </button> -->
    </div>

    <div class="map-container">

      <app-map #map></app-map>

    </div>

    <app-sidebar-panel></app-sidebar-panel>
    <app-bottombar-panel></app-bottombar-panel>
    <app-sidebar-controls #controls></app-sidebar-controls>
    <div class="drag-bottom" #resizeBot></div>
    <div class="drag-right" #resizeRight></div>
    <div class="drag-corner" #resizeCorner></div>

  </div>
</div>

<ng-template #reportBlock>
  <div #panelDiv class="panel panel-default allowPointerEvents">

    <div #dragBar class="panel-heading panel-heading-custom">
      {{ windowPanel.title }} - {{ windowPanel.tag }}
      <button class="navbarButton" (click)="removeWindow()">
        <span class="glyphicon glyphicon-remove"></span>
      </button>
      <!-- <button class="navbarButton" (click)="incAlpha()">
        <span class="glyphicon glyphicon-plus"></span>
      </button>
      <button class="navbarButton" (click)="decAlpha()">
        <span class="glyphicon glyphicon-minus"></span>
      </button>
      <button class="navbarButton" (click)="maximize()">
        <span #glyphSize class="glyphicon" [ngClass]="{'glyphicon-resize-full': !maximized, 'glyphicon-resize-small': maximized }"></span>
      </button> -->
    </div>

    <div class="download-button">
      <button type="button" class="btn btn-primary btn-responsive" (click)="download('PDF')">Download as PDF</button>
    </div>

    <div class="report-container">
      

      <h1>Report for Map {{ windowPanel.tag }}</h1>

      <h2>Aquifers</h2>
      <table>
        <tr>
          <th>Name</th>
          <th>Original Recharge (in/y)</th>
          <th>Current Recharge (in/y)</th>
          <th>Original Recharge (Mgal/d)</th>
          <th>Current Recharge (Mgal/d)</th>
          <th>Number of Cells (75m<sup>2</sup>)</th>
          <th>Difference (Mgal/d)</th>
          <th>Percent Change</th>
        </tr>
        <tr *ngFor="let aquifer of windowPanel.data.aquifers">
          <td>{{aquifer.name}}</td>
          <td>{{aquifer.roundedMetrics.IPY.original}}</td>
          <td>{{aquifer.roundedMetrics.IPY.current}}</td>
          <td>{{aquifer.roundedMetrics.MGPD.original}}</td>
          <td>{{aquifer.roundedMetrics.MGPD.current}}</td>
          <td>{{aquifer.roundedMetrics.cells}}</td>
          <td>{{aquifer.roundedMetrics.MGPD.diff}}</td>
          <td>{{aquifer.roundedMetrics.MGPD.pchange}}%</td>
        </tr>
      </table>

      <br>

      <div #aquiferGraph></div>

      <br>

      <h2>User Defined Areas</h2>
      <table>
        <tr>
          <th>Name</th>
          <th>Original Recharge (in/y)</th>
          <th>Current Recharge (in/y)</th>
          <th>Original Recharge (Mgal/d)</th>
          <th>Current Recharge (Mgal/d)</th>
          <th>Number of Cells (75m<sup>2</sup>)</th>
          <th>Difference (Mgal/d)</th>
          <th>Percent Change</th>
        </tr>
        <tr *ngFor="let area of windowPanel.data.customAreas">
          <td>{{area.name}}</td>
          <td>{{area.roundedMetrics.IPY.original}}</td>
          <td>{{area.roundedMetrics.IPY.current}}</td>
          <td>{{area.roundedMetrics.MGPD.original}}</td>
          <td>{{area.roundedMetrics.MGPD.current}}</td>
          <td>{{area.roundedMetrics.cells}}</td>
          <td>{{area.roundedMetrics.MGPD.difference}}</td>
          <td>{{area.roundedMetrics.MGPD.pchange}}</td>
        </tr>
      </table>

      <br>

      <div #customGraph></div>

      <br>

      <h2>User Defined Areas Total</h2>
      <table>
        <tr>
          <th>Original Recharge (in/y)</th>
          <th>Current Recharge (in/y)</th>
          <th>Original Recharge (Mgal/d)</th>
          <th>Current Recharge (Mgal/d)</th>
          <th>Number of Cells (75m<sup>2</sup>)</th>
          <th>Difference (Mgal/d)</th>
          <th>Percent Change</th>
        </tr>
        <tr>
          <td>{{windowPanel.data.customAreasTotal.roundedMetrics.IPY.original}}</td>
          <td>{{windowPanel.data.customAreasTotal.roundedMetrics.IPY.current}}</td>
          <td>{{windowPanel.data.customAreasTotal.roundedMetrics.MGPD.original}}</td>
          <td>{{windowPanel.data.customAreasTotal.roundedMetrics.MGPD.current}}</td>
          <td>{{windowPanel.data.customAreasTotal.roundedMetrics.cells}}</td>
          <td>{{windowPanel.data.customAreasTotal.roundedMetrics.MGPD.difference}}</td>
          <td>{{windowPanel.data.customAreasTotal.roundedMetrics.MGPD.pchange}}</td>
        </tr>
      </table>

      <br>

      <div #customTotalGraph></div>

      <br>

      <h2>Map Total</h2>
      <table>
        <tr>
          <th>Original Recharge (in/y)</th>
          <th>Current Recharge (in/y)</th>
          <th>Original Recharge (Mgal/d)</th>
          <th>Current Recharge (Mgal/d)</th>
          <th>Number of Cells (75m<sup>2</sup>)</th>
          <th>Difference (Mgal/d)</th>
          <th>Percent Change</th>
        </tr>
        <tr>
          <td>{{windowPanel.data.total.roundedMetrics.IPY.original}}</td>
          <td>{{windowPanel.data.total.roundedMetrics.IPY.current}}</td>
          <td>{{windowPanel.data.total.roundedMetrics.MGPD.original}}</td>
          <td>{{windowPanel.data.total.roundedMetrics.MGPD.current}}</td>
          <td>{{windowPanel.data.total.roundedMetrics.cells}}</td>
          <td>{{windowPanel.data.total.roundedMetrics.MGPD.difference}}</td>
          <td>{{windowPanel.data.total.roundedMetrics.MGPD.pchange}}</td>
        </tr>
      </table>
      
      <br>

      <div #fullGraph></div>

      <br>

    </div>

    
    <div class="drag-bottom" #resizeBot></div>
    <div class="drag-right" #resizeRight></div>
    <div class="drag-corner" #resizeCorner></div>
  
  </div>
</ng-template>
<div #phantomScrollLock class="phantom-scroll-lock"></div>
<div #phantomScrollSmooth class="phantom-scroll-smooth"></div>


